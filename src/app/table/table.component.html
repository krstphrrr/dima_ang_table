<br>
<br>
<div>
<div class="row">
  <div class="col-md-5">
    <div [ngStyle]="{'visibility':(tableDataSrc)? 'visible':'hidden'}">
      <!-- <input matInput (keyup)="onSearchInput($event)" placeholder="Search.."> -->
      <!-- filter panel start # options -->

      <mat-card class="filterCard">
        <!-- <button (click)="printSomething()">print current cols?</button> -->
      <mat-accordion multi *ngIf="tableCols">
        <mat-expansion-panel hideToggle >
          <mat-expansion-panel-header>
            <mat-panel-title>
              Choose a filter
            </mat-panel-title>
            
          </mat-expansion-panel-header>
          <!-- content of expansion panel -->
          <mat-grid-list cols="3" rowHeight="2:1">
            <mat-grid-tile
             *ngFor="let tableCol of tableCols"
             (click)="AddNewRow(tableCol)">
             {{tableCol}}
              </mat-grid-tile>
          </mat-grid-list> 
        </mat-expansion-panel>
        

        <mat-expansion-panel 
          *ngFor="let filter of filterArray;" 
          [expanded]="filter.open" 
          hideToggle
          [disabled]="clickButton" 
          (click)="clickButton=false">

          <mat-expansion-panel-header class="right-align">
            
            <mat-panel-title>
              {{filter.name}}
            </mat-panel-title>
            <mat-panel-description>
              <mat-icon (click)="removeRow(filter.name)">clear</mat-icon>
            </mat-panel-description>
          </mat-expansion-panel-header>
          <input matInput (keyup)="onSearchInput($event)" placeholder="filter by '{{filter.name}}' ">


          <mat-form-field class="filter" floatLabel="never">
            <mat-label>Search</mat-label>
            
            <input matInput [formControl]="colFilter">
          </mat-form-field>
        </mat-expansion-panel>
      </mat-accordion>
      </mat-card>

      
      
      <table mat-table [dataSource]="tableDataSrc" matSort class="mat-elevation-z8">
        <ng-container *ngFor="let col of tableCols">
          <ng-container matColumnDef="{{col}}">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{col}}</th>
            <td mat-cell *matCellDef="let row" >{{ row[col]}}</td>
          </ng-container>
        </ng-container>
      
        <mat-header-row *matHeaderRowDef="tableCols"></mat-header-row>
        <mat-row *matRowDef="let row; columns: tableCols" ></mat-row>
      </table>
      <mat-paginator 
        (page)="changePage($event)"
        [pageSize]="limit" 
        [length]="totalLength" 
        [pageSizeOptions]="pageLimit"  
        showFirstLastButtons></mat-paginator>
    </div>
    

  </div>
</div>
  <!-- <li *ngFor="let item of output">
    <span>{{item.data}}</span>

  </li> -->
</div>
